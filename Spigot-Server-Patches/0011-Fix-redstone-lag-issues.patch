From 47f9adf94abdfcb6fefd5a2efbbf3bcb172a2027 Mon Sep 17 00:00:00 2001
From: Iceee <andrew@opticgaming.tv>
Date: Fri, 28 Nov 2014 01:21:27 -0600
Subject: [PATCH] Fix redstone lag issues


diff --git a/src/main/java/net/minecraft/server/WorldServer.java b/src/main/java/net/minecraft/server/WorldServer.java
index a61655f..34fd259 100644
--- a/src/main/java/net/minecraft/server/WorldServer.java
+++ b/src/main/java/net/minecraft/server/WorldServer.java
@@ -590,6 +590,8 @@ public class WorldServer extends World implements IAsyncTaskHandler {
             if (i != this.L.size()) {
                 throw new IllegalStateException("TickNextTick list out of synch");
             } else {
+                // PaperSpigot start - Fix redstone lag issues
+                /*
                 if (i > 1000) {
                     // CraftBukkit start - If the server has too much to process over time, try to alleviate that
                     if (i > 20 * 1000) {
@@ -598,7 +600,12 @@ public class WorldServer extends World implements IAsyncTaskHandler {
                         i = 1000;
                     }
                     // CraftBukkit end                    
+                } */
+
+                if (i > 10000) {
+                    i = 10000;
                 }
+                // PaperSpigot end
 
                 this.methodProfiler.a("cleaning");
 
-- 
1.9.5.msysgit.0

