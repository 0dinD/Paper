From 12cbc9ca5cc3aa13d8daeea8beecf3f8ad47eac7 Mon Sep 17 00:00:00 2001
From: Zach Brown <zach.brown@destroystokyo.com>
Date: Tue, 7 Feb 2017 16:55:35 -0600
Subject: [PATCH] Disable Spigot chunk unload rate throttling


diff --git a/src/main/java/net/minecraft/server/ChunkProviderServer.java b/src/main/java/net/minecraft/server/ChunkProviderServer.java
index 7006466b5..695c9bd2a 100644
--- a/src/main/java/net/minecraft/server/ChunkProviderServer.java
+++ b/src/main/java/net/minecraft/server/ChunkProviderServer.java
@@ -324,7 +324,7 @@ public class ChunkProviderServer implements IChunkProvider {
             if (!this.unloadQueue.isEmpty()) {
                 // Spigot start
                 org.spigotmc.SlackActivityAccountant activityAccountant = this.world.getMinecraftServer().slackActivityAccountant;
-                activityAccountant.startActivity(0.5);
+                //activityAccountant.startActivity(0.5); // Paper
                 int targetSize = (int) (this.unloadQueue.size() * UNLOAD_QUEUE_RESIZE_FACTOR);
                 // Spigot end
 
@@ -344,14 +344,14 @@ public class ChunkProviderServer implements IChunkProvider {
                         // CraftBukkit end
 
                         // Spigot start
-                        if (this.unloadQueue.size() <= targetSize && activityAccountant.activityTimeIsExhausted()) {
+                        if (false && this.unloadQueue.size() <= targetSize && activityAccountant.activityTimeIsExhausted()) { // Paper - Disable for the time being
                             break;
                         }
                         // Spigot end
                     }
                 }
 
-                activityAccountant.endActivity(); // Spigot
+                //activityAccountant.endActivity(); // Spigot // Paper
             }
             // Paper start - delayed chunk unloads
             long now = System.currentTimeMillis();
-- 
2.11.1.windows.1

