From 95e9ed8131afb03030c376d2bba1b8edc7b6329e Mon Sep 17 00:00:00 2001
From: gsand <gsandowns@gmail.com>
Date: Sat, 20 Dec 2014 22:30:59 -0800
Subject: [PATCH] Configurable initial player spawn fuzziness


diff --git a/src/main/java/net/minecraft/server/EntityPlayer.java b/src/main/java/net/minecraft/server/EntityPlayer.java
index 42b68e5..2730001 100644
--- a/src/main/java/net/minecraft/server/EntityPlayer.java
+++ b/src/main/java/net/minecraft/server/EntityPlayer.java
@@ -85,7 +85,7 @@ public class EntityPlayer extends EntityHuman implements ICrafting {
         BlockPosition blockposition = worldserver.getSpawn();
 
         if (!worldserver.worldProvider.o() && worldserver.getWorldData().getGameType() != EnumGamemode.ADVENTURE) {
-            int i = Math.max(5, minecraftserver.getSpawnProtection() - 6);
+            int i = Math.max(org.github.paperspigot.PaperSpigotConfig.initialPlayerSpawnLocationRange, minecraftserver.getSpawnProtection() - 6);
             int j = MathHelper.floor(worldserver.af().b((double) blockposition.getX(), (double) blockposition.getZ()));
 
             if (j < i) {
diff --git a/src/main/java/org/github/paperspigot/PaperSpigotConfig.java b/src/main/java/org/github/paperspigot/PaperSpigotConfig.java
index 01cd24a..b8858a4 100644
--- a/src/main/java/org/github/paperspigot/PaperSpigotConfig.java
+++ b/src/main/java/org/github/paperspigot/PaperSpigotConfig.java
@@ -175,4 +175,10 @@ public class PaperSpigotConfig
         dataValueAllowedItems = new HashSet<Integer>( getList( "data-value-allowed-items", Collections.emptyList() ) );
         Bukkit.getLogger().info( "Data value allowed items: " + StringUtils.join(dataValueAllowedItems, ", ") );
     }
+
+    public static int initialPlayerSpawnLocationRange;
+    private static void initialPlayerSpawnLocationRange()
+    {
+        initialPlayerSpawnLocationRange = getInt( "player-spawning.initial-location-range", 5 );
+    }
 }
-- 
1.9.5.msysgit.0

