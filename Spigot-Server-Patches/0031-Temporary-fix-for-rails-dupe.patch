From e20a0fb77d352bd22f55070452b35d5731e2d64d Mon Sep 17 00:00:00 2001
From: Dmck2b <suddenly@suddenly.coffee>
Date: Fri, 28 Nov 2014 12:30:47 -0600
Subject: [PATCH] Temporary fix for rails dupe


diff --git a/src/main/java/net/minecraft/server/BlockMinecartTrackAbstract.java b/src/main/java/net/minecraft/server/BlockMinecartTrackAbstract.java
index 063177d..f1e299f 100644
--- a/src/main/java/net/minecraft/server/BlockMinecartTrackAbstract.java
+++ b/src/main/java/net/minecraft/server/BlockMinecartTrackAbstract.java
@@ -84,8 +84,12 @@ public abstract class BlockMinecartTrackAbstract extends Block {
             }
 
             if (flag) {
-                this.b(world, blockposition, iblockdata, 0);
-                world.setAir(blockposition);
+                // PaperSpigot start - Rails dupe workaround
+                if (world.getType(blockposition).getBlock().getMaterial() != Material.AIR) {
+                    this.b(world, blockposition, iblockdata, 0);
+                    world.setAir(blockposition);
+                }
+                // PaperSpigot end
             } else {
                 this.b(world, blockposition, iblockdata, block);
             }
-- 
1.9.5.msysgit.0

