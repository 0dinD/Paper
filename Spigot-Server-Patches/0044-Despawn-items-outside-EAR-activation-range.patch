From 823f654e472c921489a122be8373f253aac0b3bb Mon Sep 17 00:00:00 2001
From: Bestle <tom.roberts00@gmail.com>
Date: Fri, 13 Feb 2015 14:33:17 -0600
Subject: [PATCH] Despawn items outside EAR activation range


diff --git a/src/main/java/net/minecraft/server/EntityItem.java b/src/main/java/net/minecraft/server/EntityItem.java
index 659c45a..766874a 100644
--- a/src/main/java/net/minecraft/server/EntityItem.java
+++ b/src/main/java/net/minecraft/server/EntityItem.java
@@ -442,4 +442,18 @@ public class EntityItem extends Entity {
         this.r();
         this.age = 5999;
     }
+
+    // PaperSpigot start - Despawn items outside of the EAR activation range
+    @Override
+    public void inactiveTick() {
+        this.age++;
+        if (!this.world.isStatic && this.age >= world.spigotConfig.itemDespawnRate) {
+            if (org.bukkit.craftbukkit.event.CraftEventFactory.callItemDespawnEvent(this).isCancelled()) {
+                this.age = 0;
+                return;
+            }
+            this.die();
+        }
+    }
+    // PaperSpigot end
 }
-- 
2.3.0

