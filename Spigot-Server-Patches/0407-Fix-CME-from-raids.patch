From c846b7f9757ee1c83c7b4aa80c3b1a1458566e67 Mon Sep 17 00:00:00 2001
From: Shane Freeder <theboyetronic@gmail.com>
Date: Wed, 26 Jun 2019 01:20:55 +0100
Subject: [PATCH] Fix CME from raids

Use the iterator to remove elements

diff --git a/src/main/java/net/minecraft/server/Raid.java b/src/main/java/net/minecraft/server/Raid.java
index 6c1bbefd71..58c33f1000 100644
--- a/src/main/java/net/minecraft/server/Raid.java
+++ b/src/main/java/net/minecraft/server/Raid.java
@@ -144,7 +144,7 @@ public class Raid {
             BlockPosition blockposition = new BlockPosition(entityplayer);
 
             if (this.k.c_(blockposition) != this) {
-                set.remove(entityplayer);
+                iterator.remove(); // Paper - Use iterator
                 this.r.removePlayer(entityplayer);
             }
         }
-- 
2.22.0

