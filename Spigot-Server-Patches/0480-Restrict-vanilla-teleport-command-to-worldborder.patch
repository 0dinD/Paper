From b05693d1f838ea0610b915f48954530dca2943ff Mon Sep 17 00:00:00 2001
From: Zach Brown <zach@zachbr.io>
Date: Thu, 16 Apr 2020 20:07:29 -0500
Subject: [PATCH] Restrict vanilla teleport command to worldborder


diff --git a/src/main/java/net/minecraft/server/CommandTeleport.java b/src/main/java/net/minecraft/server/CommandTeleport.java
index 3060b4f68..df2711978 100644
--- a/src/main/java/net/minecraft/server/CommandTeleport.java
+++ b/src/main/java/net/minecraft/server/CommandTeleport.java
@@ -116,6 +116,11 @@ public class CommandTeleport {
     }
 
     private static void a(CommandListenerWrapper commandlistenerwrapper, Entity entity, WorldServer worldserver, double d0, double d1, double d2, Set<PacketPlayOutPosition.EnumPlayerTeleportFlags> set, float f, float f1, @Nullable CommandTeleport.a commandteleport_a) {
+        // Paper start - Don't allow teleport command to go outside the world border
+        if (!worldserver.getWorldBorder().isInBounds(new BlockPosition(d0, d1, d2))) {
+            return;
+        }
+        // Paper end
         if (entity instanceof EntityPlayer) {
             ChunkCoordIntPair chunkcoordintpair = new ChunkCoordIntPair(new BlockPosition(d0, d1, d2));
 
-- 
2.26.1.windows.1

